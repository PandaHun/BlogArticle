# 03. 타입과 추상화

## 추상화를 통한 복잡성 극복

* 현실을 이해하기에는 너무 복잡하다.
  * 그래서 이해하기 쉽고 예측 가능한 수준으로 현실을 **분해하고 단순화**한다.
* 진정한 의미의 추상화: 현실에서 출발하되 불필요한 부분을 도려내가며 본질만을 드러나게.
* 추상화는 두 차원에서 이뤄진다.
  * 사물들 간의 공통점은 취하고, 차이점을 버리는 일반화를 통해 단순하게
  * 중요한 부분을 강조하기 위해 불필요한 세부사항을 제거함으로 단순하게
* 객체지향 패러다임을 이용하기 위해서는 두 차원을 올바르게 이해하고 적용하는 것

## 객체지향과 추상화

### 모두 트럼프일 뿐

* 이상한 나라의 앨리스에서는 다양한 트럼프가 나온다.
  * 정원사, 병사, 신하, 공주, 왕자 모두 객체
  * 하지만 모두 "트럼프"라는 하나의 개념으로 바라볼 수 있다.
* 차이점은 무시한 채, 유사성을 기반으로 추상화해서 바라본 것.

### 그룹으로 나누어 단순화하기

* 트럼프: 정원사, 왕, 여왕, 신하 등등
* 토끼
* 정원에 내재된 복잡성을 감소시켜 표현한다.

### 개념

* 개념: 공통점을 기반으로 객체들을 묶기 위한 그릇
  * 우리가 인식하고 있는 다양한 객체에 적용할 수 있는 아이디어나 관념
* 분류: 개념을 이용해 객체를 여러그룹으로 나눈다.
* 인스턴스: 객체에 어떠한 개념을 적용하는 것이 가능해서 개념 그룹의 일원이 될 때의 객체

### 개념의 세 가지 관점

* 심볼: 개념을 가르키는 간략한 이름이나 명칭
* 내연: 개념의 완전한 정의
  * 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다.
* 외연: 개념에 속하는 모든 객체의 집합
* 개념을 활용해 공통점을 가진 객체들을 분류할 수 있다는 아이디어는 객체지향이 복잡성을 극복하는데 가장 기본.

### 객체를 분류하기 위한 틀

* 분류: 특정한 객체를 특정한 개념의 객체 집합에 포함시키거나 포함시키지 않는 작업
  * 객체지향의 가장 중요한 개념 중 하나
* 어떤 객체를 어떤 개념으로 분류할 것인가? =>객체지향의 품질을 결정

### 분류는 추상화를 위한 도구다

* 추상화는 두 가지 차원에서 이뤄진다.
* 개념을 통해 객체를 분류하는 것은 두 가지 차원 모두를 사용한다.
* 결국 개념은 객체들의 복잡성을 극복하기 위한 추상화의 도구다.

## 타입

### 타입은 개념이다

* 타입의 정의와 개념의 정의는 일치한다.
* 타입은 공통점을 기반으로 객체들을 묶기 위한 틀

### 데이터 타입

* 실제 메모리는 0과 1의 행렬만이 존재.
  * 이를 보고 어떤 의미인지 말할 수 없다.
* 데이터를 목적에 따라 분류하면서 **타입 시스템**이 자라났다.
  * 데이터가 비트열로 보이는 것의 혼란을 방지하기 위해서

**타입의 중요한 두 가지 사실**

* 타입은 데이터가 어떻게 사용되느냐에 관한 것
  * 데이터에 적용할 수 있는 작업으로 데이터가 어떤 타입에 속하는 지 결정한다.
  * 연산자의 종류가 아니라 어떤 연산자를 적용할 수 있는가
* 타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰진다.
  * 해당 데이터 타입의 표현 방식을 몰라도 데이터를 사용하는데 지장이 없다.

### 객체와 타입

* 객체지향을 작성할 때 우리는 객체를 데이터처럼 사용한다.
  * 객체를 타입에 분류하고 이름을 붙이는 것은, 새로운 데이터 타입을 선언하는 것과 같다.
  * 하지만 객체는 행위에 따라 변하는 상태를 갖고 있다.
* 즉, 객체는 데이터가 아니다.
  * 객체에서 중요한 것은 **객체의 행동**
  * 상태는 그저 행동의 결과로 초래된 효과를 표현하기 위해 도입한 추상적인 개념에 불과하다.
* 어떤 객체가 어떤 타입에 속하는 지를 결정하는 것은 객체가 수행하는 행동이다.
* 객체의 내부적인 표현은 외부로부터 철저하게 감춰진다.

### 행동이 우선이다.

* 객체의 타입은 객체의 행동만이 결정한다.
  * 분류할 때의 명확한 기준.
  * 데이터는 아무런 영향도 미치지 않는다.
* 이를 통해 객체지향 패러다임의 몇가지 원리와 원칙에 의미를 부여할 수 있다.
* 동일한 행동이란 동일한 책임, 동일한 책임은 동일한 메시지 수신을 의미한다.
  * 따라서, 동일한 타입에 속한 객체는 내부 데이터 표현이 달라도 동일한 메시지를 수신하고 처리할 수 있다.
  * 다만 데이터 표현이 달라 처리하는 방식은 다를 수 밖에, 이것은 **다형성**에 의미를 부여한다.
* 내부 표현 방식과 무관하게 행동만이 고려 대상이다.
  * 외부에 데이터를 감춰야한다.
  * 이는 **캡슐화**를 의미한다.
  * 이를 위해 행동을 먼저 생각해야 한다.
* 객체가 외부에 제공해야 하는 책임을 먼저 결정하고, 그 책임을 수행하는데 적합한 데이터를 결정한 후, 
  데이터를 책임을 수행하는 데 필요한 인터페이스 뒤로 캡슐화 한다.
  * 책임-주도 설계는 데이터를 먼저 생각하는 데이터-주도 설계(Data-Driven Design)을 개선하기 위해 고안 됐다.

## 타입의 계층

### 트럼프 계층

* 트럼프 타입의 객체: 엎드리고, 뒤집어 질 수 있다.
* 트럼프 인간 타입의 객체: 엎드리고, 뒤집어 질 수 있고, 걸을때 펄럭인다.
* 트럼프 인간 타입의 객체는 트럼프 타입의 객체가 하는 모든 행동을 할 수 있을뿐만 아니라 추가적인 행동을 한다.
  * 좀 더 특화된 행동을 한다.
* 트럼프 인간은 트럼프이다.
  * 이 관점에서 트럼프는 트럼프 인간을 포괄하는 좀 더 일반적인 개념.
  * 트럼프 인간은 트럼프보다 좀 더 특화된 행동을 하는 특수한 개념이다.
* 이를, **일반화 / 특수화(Generalization/Specialization) 관계**라고 한다

### 일반화/특수화 관계

* 일반화와 특수화는 동시에 일어난다.
  * 특수하다는 것은 일반적인 개념보다 범위가 더 좁다는 것을 의미한다.
* 일반화/특수화를 결정하는 요인은 상태를 표현하는 데이터가 아니라 **행동**
  * 즉 내부에 보관한 데이터가 아니라, 외부로 노출된 행동
  * 일반적인 타입: 적은 수의 행동
  * 특수한 타입: 일반적인 타입에 비해 많은 행동을 가지며, 일반적인 타입이 하는 모든 행동을 동일하게 수행할 수 있다.

### 슈퍼타입과 서브타입

* **슈퍼타입**: 일반적인 타입
* **서브타입**: 특수한 타입

### 일반화는 추상화를 위한 도구다.

* 일반화/특수화 계층은 추상화의 두번째 차원을 적절하게 활용하는 대표적인 예다.

## 정적 모델

### 타입의 목적

* 왜 타입을 사용하는가?
  * 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기 위해
  * 객체의 상태는 변하지만, 다른 객체와 구별할 수 있는 식별성은 동일하게 유지된다.
* 즉, 타입은 시간에 따라 동적으로 변하는 상태를 시간과 무관한 정적인 모습으로 다루게 한다.

### 결국 타입은 추상화다.

* 타입을 이용하면 객체의 동적인 특성을 추상화를 할 수 있다.
  * 결국 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화하는 효과적인 방법.

### 동적 모델과 정적 모델

* 객체가 특정 시점에 구체적으로 어떤 상태를 가지느냐.
  * 객체의 스냅샷으로 동적 모델
* 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것
  * 타입 모델, 정적 모델
* 객체지향 애플리케이션을 설계하고 구현하기 위해서는 동적, 정적 모델을 적절히 혼용한다.

### 클래스

* 정적인 모델은 클래스를 이용해 구현한다.
  * 타입을 구현하는 가장 보편적인 방법은 클래스
  * 클래스 != 타입
* 클래스와 타입을 구분하는 것이 중요하다.
  * 클래스는 타입을 구현하기 위한 구현 매커니즘의 한 종류.